import{p as K,r as wn,s as an,i as qn,b as en,o as Dn,a as Z,d as zn,j as Q,h as L,q as xt,t as jn,v as gt,c as In,f as I,m as v,n as pn,g as kn,k as ft,l as kt,w as dt}from"./common/index-83c259de.js";import{s as dn}from"./common/index-ab377199.js";const Cn={name:"attention",tokenize:St,resolveAll:bt};function bt(n,r){let e=-1,t,u,a,i,o,c,h,p;for(;++e<n.length;)if(n[e][0]==="enter"&&n[e][1].type==="attentionSequence"&&n[e][1]._close){for(t=e;t--;)if(n[t][0]==="exit"&&n[t][1].type==="attentionSequence"&&n[t][1]._open&&r.sliceSerialize(n[t][1]).charCodeAt(0)===r.sliceSerialize(n[e][1]).charCodeAt(0)){if((n[t][1]._close||n[e][1]._open)&&(n[e][1].end.offset-n[e][1].start.offset)%3&&!((n[t][1].end.offset-n[t][1].start.offset+n[e][1].end.offset-n[e][1].start.offset)%3))continue;c=n[t][1].end.offset-n[t][1].start.offset>1&&n[e][1].end.offset-n[e][1].start.offset>1?2:1;const x=Object.assign({},n[t][1].end),f=Object.assign({},n[e][1].start);Rn(x,-c),Rn(f,c),i={type:c>1?"strongSequence":"emphasisSequence",start:x,end:Object.assign({},n[t][1].end)},o={type:c>1?"strongSequence":"emphasisSequence",start:Object.assign({},n[e][1].start),end:f},a={type:c>1?"strongText":"emphasisText",start:Object.assign({},n[t][1].end),end:Object.assign({},n[e][1].start)},u={type:c>1?"strong":"emphasis",start:Object.assign({},i.start),end:Object.assign({},o.end)},n[t][1].end=Object.assign({},i.start),n[e][1].start=Object.assign({},o.end),h=[],n[t][1].end.offset-n[t][1].start.offset&&(h=K(h,[["enter",n[t][1],r],["exit",n[t][1],r]])),h=K(h,[["enter",u,r],["enter",i,r],["exit",i,r],["enter",a,r]]),h=K(h,wn(r.parser.constructs.insideSpan.null,n.slice(t+1,e),r)),h=K(h,[["exit",a,r],["enter",o,r],["exit",o,r],["exit",u,r]]),n[e][1].end.offset-n[e][1].start.offset?(p=2,h=K(h,[["enter",n[e][1],r],["exit",n[e][1],r]])):p=0,an(n,t-1,e-t+3,h),e=t+h.length-p-2;break}}for(e=-1;++e<n.length;)n[e][1].type==="attentionSequence"&&(n[e][1].type="data");return n}function St(n,r){const e=this.parser.constructs.attentionMarkers.null,t=this.previous,u=qn(t);let a;return i;function i(c){return n.enter("attentionSequence"),a=c,o(c)}function o(c){if(c===a)return n.consume(c),o;const h=n.exit("attentionSequence"),p=qn(c),x=!p||p===2&&u||e.includes(c),f=!u||u===2&&p||e.includes(t);return h._open=Boolean(a===42?x:x&&(u||!f)),h._close=Boolean(a===42?f:f&&(p||!x)),r(c)}}function Rn(n,r){n.column+=r,n.offset+=r,n._bufferIndex+=r}const yt={name:"autolink",tokenize:wt};function wt(n,r,e){let t=1;return u;function u(k){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(k),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),a}function a(k){return en(k)?(n.consume(k),i):Dn(k)?h(k):e(k)}function i(k){return k===43||k===45||k===46||Z(k)?o(k):h(k)}function o(k){return k===58?(n.consume(k),c):(k===43||k===45||k===46||Z(k))&&t++<32?(n.consume(k),o):h(k)}function c(k){return k===62?(n.exit("autolinkProtocol"),g(k)):k===null||k===32||k===60||zn(k)?e(k):(n.consume(k),c)}function h(k){return k===64?(n.consume(k),t=0,p):Dn(k)?(n.consume(k),h):e(k)}function p(k){return Z(k)?x(k):e(k)}function x(k){return k===46?(n.consume(k),t=0,p):k===62?(n.exit("autolinkProtocol").type="autolinkEmail",g(k)):f(k)}function f(k){return(k===45||Z(k))&&t++<63?(n.consume(k),k===45?f:x):e(k)}function g(k){return n.enter("autolinkMarker"),n.consume(k),n.exit("autolinkMarker"),n.exit("autolink"),r}}const Hn={name:"blockQuote",tokenize:zt,continuation:{tokenize:It},exit:Ct};function zt(n,r,e){const t=this;return u;function u(i){if(i===62){const o=t.containerState;return o.open||(n.enter("blockQuote",{_container:!0}),o.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(i),n.exit("blockQuoteMarker"),a}return e(i)}function a(i){return Q(i)?(n.enter("blockQuotePrefixWhitespace"),n.consume(i),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),r):(n.exit("blockQuotePrefix"),r(i))}}function It(n,r,e){return L(n,n.attempt(Hn,r,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ct(n){n.exit("blockQuote")}const Vn={name:"characterEscape",tokenize:Et};function Et(n,r,e){return t;function t(a){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(a),n.exit("escapeMarker"),u}function u(a){return xt(a)?(n.enter("characterEscapeValue"),n.consume(a),n.exit("characterEscapeValue"),n.exit("characterEscape"),r):e(a)}}const Nn={name:"characterReference",tokenize:Ft};function Ft(n,r,e){const t=this;let u=0,a,i;return o;function o(x){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(x),n.exit("characterReferenceMarker"),c}function c(x){return x===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(x),n.exit("characterReferenceMarkerNumeric"),h):(n.enter("characterReferenceValue"),a=31,i=Z,p(x))}function h(x){return x===88||x===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(x),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),a=6,i=gt,p):(n.enter("characterReferenceValue"),a=7,i=In,p(x))}function p(x){let f;return x===59&&u?(f=n.exit("characterReferenceValue"),i===Z&&!jn(t.sliceSerialize(f))?e(x):(n.enter("characterReferenceMarker"),n.consume(x),n.exit("characterReferenceMarker"),n.exit("characterReference"),r)):i(x)&&u++<a?(n.consume(x),p):e(x)}}const Qn={name:"codeFenced",tokenize:Tt,concrete:!0};function Tt(n,r,e){const t=this,u={tokenize:A,partial:!0},a={tokenize:O,partial:!0},i=this.events[this.events.length-1],o=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0;let c=0,h;return p;function p(d){return n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),h=d,x(d)}function x(d){return d===h?(n.consume(d),c++,x):(n.exit("codeFencedFenceSequence"),c<3?e(d):L(n,f,"whitespace")(d))}function f(d){return d===null||I(d)?P(d):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),g(d))}function g(d){return d===null||v(d)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),L(n,k,"whitespace")(d)):d===96&&d===h?e(d):(n.consume(d),g)}function k(d){return d===null||I(d)?P(d):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),T(d))}function T(d){return d===null||I(d)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),P(d)):d===96&&d===h?e(d):(n.consume(d),T)}function P(d){return n.exit("codeFencedFence"),t.interrupt?r(d):S(d)}function S(d){return d===null?w(d):I(d)?n.attempt(a,n.attempt(u,w,o?L(n,S,"linePrefix",o+1):S),w)(d):(n.enter("codeFlowValue"),M(d))}function M(d){return d===null||I(d)?(n.exit("codeFlowValue"),S(d)):(n.consume(d),M)}function w(d){return n.exit("codeFenced"),r(d)}function O(d,_,D){const j=this;return V;function V(z){return d.enter("lineEnding"),d.consume(z),d.exit("lineEnding"),y}function y(z){return j.parser.lazy[j.now().line]?D(z):_(z)}}function A(d,_,D){let j=0;return L(d,V,"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4);function V(E){return d.enter("codeFencedFence"),d.enter("codeFencedFenceSequence"),y(E)}function y(E){return E===h?(d.consume(E),j++,y):j<c?D(E):(d.exit("codeFencedFenceSequence"),L(d,z,"whitespace")(E))}function z(E){return E===null||I(E)?(d.exit("codeFencedFence"),_(E)):D(E)}}}const En={name:"codeIndented",tokenize:Ot},Lt={tokenize:At,partial:!0};function Ot(n,r,e){const t=this;return u;function u(h){return n.enter("codeIndented"),L(n,a,"linePrefix",4+1)(h)}function a(h){const p=t.events[t.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?i(h):e(h)}function i(h){return h===null?c(h):I(h)?n.attempt(Lt,i,c)(h):(n.enter("codeFlowValue"),o(h))}function o(h){return h===null||I(h)?(n.exit("codeFlowValue"),i(h)):(n.consume(h),o)}function c(h){return n.exit("codeIndented"),r(h)}}function At(n,r,e){const t=this;return u;function u(i){return t.parser.lazy[t.now().line]?e(i):I(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),u):L(n,a,"linePrefix",4+1)(i)}function a(i){const o=t.events[t.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?r(i):I(i)?u(i):e(i)}}const Bt={name:"codeText",tokenize:Mt,resolve:Pt,previous:_t};function Pt(n){let r=n.length-4,e=3,t,u;if((n[e][1].type==="lineEnding"||n[e][1].type==="space")&&(n[r][1].type==="lineEnding"||n[r][1].type==="space")){for(t=e;++t<r;)if(n[t][1].type==="codeTextData"){n[e][1].type="codeTextPadding",n[r][1].type="codeTextPadding",e+=2,r-=2;break}}for(t=e-1,r++;++t<=r;)u===void 0?t!==r&&n[t][1].type!=="lineEnding"&&(u=t):(t===r||n[t][1].type==="lineEnding")&&(n[u][1].type="codeTextData",t!==u+2&&(n[u][1].end=n[t-1][1].end,n.splice(u+2,t-u-2),r-=t-u-2,t=u+2),u=void 0);return n}function _t(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Mt(n,r,e){let t=0,u,a;return i;function i(x){return n.enter("codeText"),n.enter("codeTextSequence"),o(x)}function o(x){return x===96?(n.consume(x),t++,o):(n.exit("codeTextSequence"),c(x))}function c(x){return x===null?e(x):x===96?(a=n.enter("codeTextSequence"),u=0,p(x)):x===32?(n.enter("space"),n.consume(x),n.exit("space"),c):I(x)?(n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),c):(n.enter("codeTextData"),h(x))}function h(x){return x===null||x===32||x===96||I(x)?(n.exit("codeTextData"),c(x)):(n.consume(x),h)}function p(x){return x===96?(n.consume(x),u++,p):u===t?(n.exit("codeTextSequence"),n.exit("codeText"),r(x)):(a.type="codeTextData",h(x))}}function Un(n){const r={};let e=-1,t,u,a,i,o,c,h;for(;++e<n.length;){for(;e in r;)e=r[e];if(t=n[e],e&&t[1].type==="chunkFlow"&&n[e-1][1].type==="listItemPrefix"&&(c=t[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(t[0]==="enter")t[1].contentType&&(Object.assign(r,qt(n,e)),e=r[e],h=!0);else if(t[1]._container){for(a=e,u=void 0;a--&&(i=n[a],i[1].type==="lineEnding"||i[1].type==="lineEndingBlank");)i[0]==="enter"&&(u&&(n[u][1].type="lineEndingBlank"),i[1].type="lineEnding",u=a);u&&(t[1].end=Object.assign({},n[u][1].start),o=n.slice(u,e),o.unshift(t),an(n,u,e-u+1,o))}}return!h}function qt(n,r){const e=n[r][1],t=n[r][2];let u=r-1;const a=[],i=e._tokenizer||t.parser[e.contentType](e.start),o=i.events,c=[],h={};let p,x,f=-1,g=e,k=0,T=0;const P=[T];for(;g;){for(;n[++u][1]!==g;);a.push(u),g._tokenizer||(p=t.sliceStream(g),g.next||p.push(null),x&&i.defineSkip(g.start),g._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(p),g._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),x=g,g=g.next}for(g=e;++f<o.length;)o[f][0]==="exit"&&o[f-1][0]==="enter"&&o[f][1].type===o[f-1][1].type&&o[f][1].start.line!==o[f][1].end.line&&(T=f+1,P.push(T),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(i.events=[],g?(g._tokenizer=void 0,g.previous=void 0):P.pop(),f=P.length;f--;){const S=o.slice(P[f],P[f+1]),M=a.pop();c.unshift([M,M+S.length-1]),an(n,M,2,S)}for(f=-1;++f<c.length;)h[k+c[f][0]]=k+c[f][1],k+=c[f][1]-c[f][0]-1;return h}const Dt={tokenize:Ht,resolve:Rt},jt={tokenize:Vt,partial:!0};function Rt(n){return Un(n),n}function Ht(n,r){let e;return t;function t(o){return n.enter("content"),e=n.enter("chunkContent",{contentType:"content"}),u(o)}function u(o){return o===null?a(o):I(o)?n.check(jt,i,a)(o):(n.consume(o),u)}function a(o){return n.exit("chunkContent"),n.exit("content"),r(o)}function i(o){return n.consume(o),n.exit("chunkContent"),e.next=n.enter("chunkContent",{contentType:"content",previous:e}),e=e.next,u}}function Vt(n,r,e){const t=this;return u;function u(i){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),L(n,a,"linePrefix")}function a(i){if(i===null||I(i))return e(i);const o=t.events[t.events.length-1];return!t.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?r(i):n.interrupt(t.parser.constructs.flow,e,r)(i)}}function Wn(n,r,e,t,u,a,i,o,c){const h=c||Number.POSITIVE_INFINITY;let p=0;return x;function x(S){return S===60?(n.enter(t),n.enter(u),n.enter(a),n.consume(S),n.exit(a),f):S===null||S===41||zn(S)?e(S):(n.enter(t),n.enter(i),n.enter(o),n.enter("chunkString",{contentType:"string"}),T(S))}function f(S){return S===62?(n.enter(a),n.consume(S),n.exit(a),n.exit(u),n.exit(t),r):(n.enter(o),n.enter("chunkString",{contentType:"string"}),g(S))}function g(S){return S===62?(n.exit("chunkString"),n.exit(o),f(S)):S===null||S===60||I(S)?e(S):(n.consume(S),S===92?k:g)}function k(S){return S===60||S===62||S===92?(n.consume(S),g):g(S)}function T(S){return S===40?++p>h?e(S):(n.consume(S),T):S===41?p--?(n.consume(S),T):(n.exit("chunkString"),n.exit(o),n.exit(i),n.exit(t),r(S)):S===null||v(S)?p?e(S):(n.exit("chunkString"),n.exit(o),n.exit(i),n.exit(t),r(S)):zn(S)?e(S):(n.consume(S),S===92?P:T)}function P(S){return S===40||S===41||S===92?(n.consume(S),T):T(S)}}function $n(n,r,e,t,u,a){const i=this;let o=0,c;return h;function h(g){return n.enter(t),n.enter(u),n.consume(g),n.exit(u),n.enter(a),p}function p(g){return g===null||g===91||g===93&&!c||g===94&&!o&&"_hiddenFootnoteSupport"in i.parser.constructs||o>999?e(g):g===93?(n.exit(a),n.enter(u),n.consume(g),n.exit(u),n.exit(t),r):I(g)?(n.enter("lineEnding"),n.consume(g),n.exit("lineEnding"),p):(n.enter("chunkString",{contentType:"string"}),x(g))}function x(g){return g===null||g===91||g===93||I(g)||o++>999?(n.exit("chunkString"),p(g)):(n.consume(g),c=c||!Q(g),g===92?f:x)}function f(g){return g===91||g===92||g===93?(n.consume(g),o++,x):x(g)}}function Yn(n,r,e,t,u,a){let i;return o;function o(f){return n.enter(t),n.enter(u),n.consume(f),n.exit(u),i=f===40?41:f,c}function c(f){return f===i?(n.enter(u),n.consume(f),n.exit(u),n.exit(t),r):(n.enter(a),h(f))}function h(f){return f===i?(n.exit(a),c(i)):f===null?e(f):I(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),L(n,h,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),p(f))}function p(f){return f===i||f===null||I(f)?(n.exit("chunkString"),h(f)):(n.consume(f),f===92?x:p)}function x(f){return f===i||f===92?(n.consume(f),p):p(f)}}function fn(n,r){let e;return t;function t(u){return I(u)?(n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),e=!0,t):Q(u)?L(n,t,e?"linePrefix":"lineSuffix")(u):r(u)}}const Nt={name:"definition",tokenize:Ut},Qt={tokenize:Wt,partial:!0};function Ut(n,r,e){const t=this;let u;return a;function a(c){return n.enter("definition"),$n.call(t,n,i,e,"definitionLabel","definitionLabelMarker","definitionLabelString")(c)}function i(c){return u=pn(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)),c===58?(n.enter("definitionMarker"),n.consume(c),n.exit("definitionMarker"),fn(n,Wn(n,n.attempt(Qt,L(n,o,"whitespace"),L(n,o,"whitespace")),e,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):e(c)}function o(c){return c===null||I(c)?(n.exit("definition"),t.parser.defined.includes(u)||t.parser.defined.push(u),r(c)):e(c)}}function Wt(n,r,e){return t;function t(i){return v(i)?fn(n,u)(i):e(i)}function u(i){return i===34||i===39||i===40?Yn(n,L(n,a,"whitespace"),e,"definitionTitle","definitionTitleMarker","definitionTitleString")(i):e(i)}function a(i){return i===null||I(i)?r(i):e(i)}}const $t={name:"hardBreakEscape",tokenize:Yt};function Yt(n,r,e){return t;function t(a){return n.enter("hardBreakEscape"),n.enter("escapeMarker"),n.consume(a),u}function u(a){return I(a)?(n.exit("escapeMarker"),n.exit("hardBreakEscape"),r(a)):e(a)}}const Gt={name:"headingAtx",tokenize:Kt,resolve:Jt};function Jt(n,r){let e=n.length-2,t=3,u,a;return n[t][1].type==="whitespace"&&(t+=2),e-2>t&&n[e][1].type==="whitespace"&&(e-=2),n[e][1].type==="atxHeadingSequence"&&(t===e-1||e-4>t&&n[e-2][1].type==="whitespace")&&(e-=t+1===e?2:4),e>t&&(u={type:"atxHeadingText",start:n[t][1].start,end:n[e][1].end},a={type:"chunkText",start:n[t][1].start,end:n[e][1].end,contentType:"text"},an(n,t,e-t+1,[["enter",u,r],["enter",a,r],["exit",a,r],["exit",u,r]])),n}function Kt(n,r,e){const t=this;let u=0;return a;function a(p){return n.enter("atxHeading"),n.enter("atxHeadingSequence"),i(p)}function i(p){return p===35&&u++<6?(n.consume(p),i):p===null||v(p)?(n.exit("atxHeadingSequence"),t.interrupt?r(p):o(p)):e(p)}function o(p){return p===35?(n.enter("atxHeadingSequence"),c(p)):p===null||I(p)?(n.exit("atxHeading"),r(p)):Q(p)?L(n,o,"whitespace")(p):(n.enter("atxHeadingText"),h(p))}function c(p){return p===35?(n.consume(p),c):(n.exit("atxHeadingSequence"),o(p))}function h(p){return p===null||p===35||v(p)?(n.exit("atxHeadingText"),o(p)):(n.consume(p),h)}}const Xt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Gn=["pre","script","style","textarea"],Zt={name:"htmlFlow",tokenize:te,resolveTo:ne,concrete:!0},vt={tokenize:ee,partial:!0};function ne(n){let r=n.length;for(;r--&&!(n[r][0]==="enter"&&n[r][1].type==="htmlFlow"););return r>1&&n[r-2][1].type==="linePrefix"&&(n[r][1].start=n[r-2][1].start,n[r+1][1].start=n[r-2][1].start,n.splice(r-2,2)),n}function te(n,r,e){const t=this;let u,a,i,o,c;return h;function h(l){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(l),p}function p(l){return l===33?(n.consume(l),x):l===47?(n.consume(l),k):l===63?(n.consume(l),u=3,t.interrupt?r:$):en(l)?(n.consume(l),i=String.fromCharCode(l),a=!0,T):e(l)}function x(l){return l===45?(n.consume(l),u=2,f):l===91?(n.consume(l),u=5,i="CDATA[",o=0,g):en(l)?(n.consume(l),u=4,t.interrupt?r:$):e(l)}function f(l){return l===45?(n.consume(l),t.interrupt?r:$):e(l)}function g(l){return l===i.charCodeAt(o++)?(n.consume(l),o===i.length?t.interrupt?r:y:g):e(l)}function k(l){return en(l)?(n.consume(l),i=String.fromCharCode(l),T):e(l)}function T(l){return l===null||l===47||l===62||v(l)?l!==47&&a&&Gn.includes(i.toLowerCase())?(u=1,t.interrupt?r(l):y(l)):Xt.includes(i.toLowerCase())?(u=6,l===47?(n.consume(l),P):t.interrupt?r(l):y(l)):(u=7,t.interrupt&&!t.parser.lazy[t.now().line]?e(l):a?M(l):S(l)):l===45||Z(l)?(n.consume(l),i+=String.fromCharCode(l),T):e(l)}function P(l){return l===62?(n.consume(l),t.interrupt?r:y):e(l)}function S(l){return Q(l)?(n.consume(l),S):j(l)}function M(l){return l===47?(n.consume(l),j):l===58||l===95||en(l)?(n.consume(l),w):Q(l)?(n.consume(l),M):j(l)}function w(l){return l===45||l===46||l===58||l===95||Z(l)?(n.consume(l),w):O(l)}function O(l){return l===61?(n.consume(l),A):Q(l)?(n.consume(l),O):M(l)}function A(l){return l===null||l===60||l===61||l===62||l===96?e(l):l===34||l===39?(n.consume(l),c=l,d):Q(l)?(n.consume(l),A):(c=null,_(l))}function d(l){return l===null||I(l)?e(l):l===c?(n.consume(l),D):(n.consume(l),d)}function _(l){return l===null||l===34||l===39||l===60||l===61||l===62||l===96||v(l)?O(l):(n.consume(l),_)}function D(l){return l===47||l===62||Q(l)?M(l):e(l)}function j(l){return l===62?(n.consume(l),V):e(l)}function V(l){return Q(l)?(n.consume(l),V):l===null||I(l)?y(l):e(l)}function y(l){return l===45&&u===2?(n.consume(l),G):l===60&&u===1?(n.consume(l),nn):l===62&&u===4?(n.consume(l),R):l===63&&u===3?(n.consume(l),$):l===93&&u===5?(n.consume(l),N):I(l)&&(u===6||u===7)?n.check(vt,R,z)(l):l===null||I(l)?z(l):(n.consume(l),y)}function z(l){return n.exit("htmlFlowData"),E(l)}function E(l){return l===null?s(l):I(l)?n.attempt({tokenize:W,partial:!0},E,s)(l):(n.enter("htmlFlowData"),y(l))}function W(l,ln,mn){return sn;function sn(tn){return l.enter("lineEnding"),l.consume(tn),l.exit("lineEnding"),H}function H(tn){return t.parser.lazy[t.now().line]?mn(tn):ln(tn)}}function G(l){return l===45?(n.consume(l),$):y(l)}function nn(l){return l===47?(n.consume(l),i="",X):y(l)}function X(l){return l===62&&Gn.includes(i.toLowerCase())?(n.consume(l),R):en(l)&&i.length<8?(n.consume(l),i+=String.fromCharCode(l),X):y(l)}function N(l){return l===93?(n.consume(l),$):y(l)}function $(l){return l===62?(n.consume(l),R):l===45&&u===2?(n.consume(l),$):y(l)}function R(l){return l===null||I(l)?(n.exit("htmlFlowData"),s(l)):(n.consume(l),R)}function s(l){return n.exit("htmlFlow"),r(l)}}function ee(n,r,e){return t;function t(u){return n.exit("htmlFlowData"),n.enter("lineEndingBlank"),n.consume(u),n.exit("lineEndingBlank"),n.attempt(kn,r,e)}}const re={name:"htmlText",tokenize:ie};function ie(n,r,e){const t=this;let u,a,i,o;return c;function c(s){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(s),h}function h(s){return s===33?(n.consume(s),p):s===47?(n.consume(s),_):s===63?(n.consume(s),A):en(s)?(n.consume(s),V):e(s)}function p(s){return s===45?(n.consume(s),x):s===91?(n.consume(s),a="CDATA[",i=0,P):en(s)?(n.consume(s),O):e(s)}function x(s){return s===45?(n.consume(s),f):e(s)}function f(s){return s===null||s===62?e(s):s===45?(n.consume(s),g):k(s)}function g(s){return s===null||s===62?e(s):k(s)}function k(s){return s===null?e(s):s===45?(n.consume(s),T):I(s)?(o=k,N(s)):(n.consume(s),k)}function T(s){return s===45?(n.consume(s),R):k(s)}function P(s){return s===a.charCodeAt(i++)?(n.consume(s),i===a.length?S:P):e(s)}function S(s){return s===null?e(s):s===93?(n.consume(s),M):I(s)?(o=S,N(s)):(n.consume(s),S)}function M(s){return s===93?(n.consume(s),w):S(s)}function w(s){return s===62?R(s):s===93?(n.consume(s),w):S(s)}function O(s){return s===null||s===62?R(s):I(s)?(o=O,N(s)):(n.consume(s),O)}function A(s){return s===null?e(s):s===63?(n.consume(s),d):I(s)?(o=A,N(s)):(n.consume(s),A)}function d(s){return s===62?R(s):A(s)}function _(s){return en(s)?(n.consume(s),D):e(s)}function D(s){return s===45||Z(s)?(n.consume(s),D):j(s)}function j(s){return I(s)?(o=j,N(s)):Q(s)?(n.consume(s),j):R(s)}function V(s){return s===45||Z(s)?(n.consume(s),V):s===47||s===62||v(s)?y(s):e(s)}function y(s){return s===47?(n.consume(s),R):s===58||s===95||en(s)?(n.consume(s),z):I(s)?(o=y,N(s)):Q(s)?(n.consume(s),y):R(s)}function z(s){return s===45||s===46||s===58||s===95||Z(s)?(n.consume(s),z):E(s)}function E(s){return s===61?(n.consume(s),W):I(s)?(o=E,N(s)):Q(s)?(n.consume(s),E):y(s)}function W(s){return s===null||s===60||s===61||s===62||s===96?e(s):s===34||s===39?(n.consume(s),u=s,G):I(s)?(o=W,N(s)):Q(s)?(n.consume(s),W):(n.consume(s),u=void 0,X)}function G(s){return s===u?(n.consume(s),nn):s===null?e(s):I(s)?(o=G,N(s)):(n.consume(s),G)}function nn(s){return s===62||s===47||v(s)?y(s):e(s)}function X(s){return s===null||s===34||s===39||s===60||s===61||s===96?e(s):s===62||v(s)?y(s):(n.consume(s),X)}function N(s){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),L(n,$,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $(s){return n.enter("htmlTextData"),o(s)}function R(s){return s===62?(n.consume(s),n.exit("htmlTextData"),n.exit("htmlText"),r):e(s)}}const Fn={name:"labelEnd",tokenize:ce,resolveTo:oe,resolveAll:se},ue={tokenize:he},ae={tokenize:pe},le={tokenize:me};function se(n){let r=-1,e;for(;++r<n.length;)e=n[r][1],(e.type==="labelImage"||e.type==="labelLink"||e.type==="labelEnd")&&(n.splice(r+1,e.type==="labelImage"?4:2),e.type="data",r++);return n}function oe(n,r){let e=n.length,t=0,u,a,i,o;for(;e--;)if(u=n[e][1],a){if(u.type==="link"||u.type==="labelLink"&&u._inactive)break;n[e][0]==="enter"&&u.type==="labelLink"&&(u._inactive=!0)}else if(i){if(n[e][0]==="enter"&&(u.type==="labelImage"||u.type==="labelLink")&&!u._balanced&&(a=e,u.type!=="labelLink")){t=2;break}}else u.type==="labelEnd"&&(i=e);const c={type:n[a][1].type==="labelLink"?"link":"image",start:Object.assign({},n[a][1].start),end:Object.assign({},n[n.length-1][1].end)},h={type:"label",start:Object.assign({},n[a][1].start),end:Object.assign({},n[i][1].end)},p={type:"labelText",start:Object.assign({},n[a+t+2][1].end),end:Object.assign({},n[i-2][1].start)};return o=[["enter",c,r],["enter",h,r]],o=K(o,n.slice(a+1,a+t+3)),o=K(o,[["enter",p,r]]),o=K(o,wn(r.parser.constructs.insideSpan.null,n.slice(a+t+4,i-3),r)),o=K(o,[["exit",p,r],n[i-2],n[i-1],["exit",h,r]]),o=K(o,n.slice(i+1)),o=K(o,[["exit",c,r]]),an(n,a,n.length,o),n}function ce(n,r,e){const t=this;let u=t.events.length,a,i;for(;u--;)if((t.events[u][1].type==="labelImage"||t.events[u][1].type==="labelLink")&&!t.events[u][1]._balanced){a=t.events[u][1];break}return o;function o(p){return a?a._inactive?h(p):(i=t.parser.defined.includes(pn(t.sliceSerialize({start:a.end,end:t.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(p),n.exit("labelMarker"),n.exit("labelEnd"),c):e(p)}function c(p){return p===40?n.attempt(ue,r,i?r:h)(p):p===91?n.attempt(ae,r,i?n.attempt(le,r,h):h)(p):i?r(p):h(p)}function h(p){return a._balanced=!0,e(p)}}function he(n,r,e){return t;function t(c){return n.enter("resource"),n.enter("resourceMarker"),n.consume(c),n.exit("resourceMarker"),fn(n,u)}function u(c){return c===41?o(c):Wn(n,a,e,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(c)}function a(c){return v(c)?fn(n,i)(c):o(c)}function i(c){return c===34||c===39||c===40?Yn(n,fn(n,o),e,"resourceTitle","resourceTitleMarker","resourceTitleString")(c):o(c)}function o(c){return c===41?(n.enter("resourceMarker"),n.consume(c),n.exit("resourceMarker"),n.exit("resource"),r):e(c)}}function pe(n,r,e){const t=this;return u;function u(i){return $n.call(t,n,a,e,"reference","referenceMarker","referenceString")(i)}function a(i){return t.parser.defined.includes(pn(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)))?r(i):e(i)}}function me(n,r,e){return t;function t(a){return n.enter("reference"),n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),u}function u(a){return a===93?(n.enter("referenceMarker"),n.consume(a),n.exit("referenceMarker"),n.exit("reference"),r):e(a)}}const xe={name:"labelStartImage",tokenize:ge,resolveAll:Fn.resolveAll};function ge(n,r,e){const t=this;return u;function u(o){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(o),n.exit("labelImageMarker"),a}function a(o){return o===91?(n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelImage"),i):e(o)}function i(o){return o===94&&"_hiddenFootnoteSupport"in t.parser.constructs?e(o):r(o)}}const fe={name:"labelStartLink",tokenize:ke,resolveAll:Fn.resolveAll};function ke(n,r,e){const t=this;return u;function u(i){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(i),n.exit("labelMarker"),n.exit("labelLink"),a}function a(i){return i===94&&"_hiddenFootnoteSupport"in t.parser.constructs?e(i):r(i)}}const Tn={name:"lineEnding",tokenize:de};function de(n,r){return e;function e(t){return n.enter("lineEnding"),n.consume(t),n.exit("lineEnding"),L(n,r,"linePrefix")}}const bn={name:"thematicBreak",tokenize:be};function be(n,r,e){let t=0,u;return a;function a(c){return n.enter("thematicBreak"),u=c,i(c)}function i(c){return c===u?(n.enter("thematicBreakSequence"),o(c)):Q(c)?L(n,i,"whitespace")(c):t<3||c!==null&&!I(c)?e(c):(n.exit("thematicBreak"),r(c))}function o(c){return c===u?(n.consume(c),t++,o):(n.exit("thematicBreakSequence"),i(c))}}const Y={name:"list",tokenize:we,continuation:{tokenize:ze},exit:Ce},Se={tokenize:Ee,partial:!0},ye={tokenize:Ie,partial:!0};function we(n,r,e){const t=this,u=t.events[t.events.length-1];let a=u&&u[1].type==="linePrefix"?u[2].sliceSerialize(u[1],!0).length:0,i=0;return o;function o(g){const k=t.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(k==="listUnordered"?!t.containerState.marker||g===t.containerState.marker:In(g)){if(t.containerState.type||(t.containerState.type=k,n.enter(k,{_container:!0})),k==="listUnordered")return n.enter("listItemPrefix"),g===42||g===45?n.check(bn,e,h)(g):h(g);if(!t.interrupt||g===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),c(g)}return e(g)}function c(g){return In(g)&&++i<10?(n.consume(g),c):(!t.interrupt||i<2)&&(t.containerState.marker?g===t.containerState.marker:g===41||g===46)?(n.exit("listItemValue"),h(g)):e(g)}function h(g){return n.enter("listItemMarker"),n.consume(g),n.exit("listItemMarker"),t.containerState.marker=t.containerState.marker||g,n.check(kn,t.interrupt?e:p,n.attempt(Se,f,x))}function p(g){return t.containerState.initialBlankLine=!0,a++,f(g)}function x(g){return Q(g)?(n.enter("listItemPrefixWhitespace"),n.consume(g),n.exit("listItemPrefixWhitespace"),f):e(g)}function f(g){return t.containerState.size=a+t.sliceSerialize(n.exit("listItemPrefix"),!0).length,r(g)}}function ze(n,r,e){const t=this;return t.containerState._closeFlow=void 0,n.check(kn,u,a);function u(o){return t.containerState.furtherBlankLines=t.containerState.furtherBlankLines||t.containerState.initialBlankLine,L(n,r,"listItemIndent",t.containerState.size+1)(o)}function a(o){return t.containerState.furtherBlankLines||!Q(o)?(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,i(o)):(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,n.attempt(ye,r,i)(o))}function i(o){return t.containerState._closeFlow=!0,t.interrupt=void 0,L(n,n.attempt(Y,r,e),"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Ie(n,r,e){const t=this;return L(n,u,"listItemIndent",t.containerState.size+1);function u(a){const i=t.events[t.events.length-1];return i&&i[1].type==="listItemIndent"&&i[2].sliceSerialize(i[1],!0).length===t.containerState.size?r(a):e(a)}}function Ce(n){n.exit(this.containerState.type)}function Ee(n,r,e){const t=this;return L(n,u,"listItemPrefixWhitespace",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function u(a){const i=t.events[t.events.length-1];return!Q(a)&&i&&i[1].type==="listItemPrefixWhitespace"?r(a):e(a)}}const Jn={name:"setextUnderline",tokenize:Te,resolveTo:Fe};function Fe(n,r){let e=n.length,t,u,a;for(;e--;)if(n[e][0]==="enter"){if(n[e][1].type==="content"){t=e;break}n[e][1].type==="paragraph"&&(u=e)}else n[e][1].type==="content"&&n.splice(e,1),!a&&n[e][1].type==="definition"&&(a=e);const i={type:"setextHeading",start:Object.assign({},n[u][1].start),end:Object.assign({},n[n.length-1][1].end)};return n[u][1].type="setextHeadingText",a?(n.splice(u,0,["enter",i,r]),n.splice(a+1,0,["exit",n[t][1],r]),n[t][1].end=Object.assign({},n[a][1].end)):n[t][1]=i,n.push(["exit",i,r]),n}function Te(n,r,e){const t=this;let u=t.events.length,a,i;for(;u--;)if(t.events[u][1].type!=="lineEnding"&&t.events[u][1].type!=="linePrefix"&&t.events[u][1].type!=="content"){i=t.events[u][1].type==="paragraph";break}return o;function o(p){return!t.parser.lazy[t.now().line]&&(t.interrupt||i)?(n.enter("setextHeadingLine"),n.enter("setextHeadingLineSequence"),a=p,c(p)):e(p)}function c(p){return p===a?(n.consume(p),c):(n.exit("setextHeadingLineSequence"),L(n,h,"lineSuffix")(p))}function h(p){return p===null||I(p)?(n.exit("setextHeadingLine"),r(p)):e(p)}}function Le(n,r){var{includeImageAlt:e=!0}=r||{};return Kn(n,e)}function Kn(n,r){return n&&typeof n=="object"&&(n.value||(r?n.alt:"")||"children"in n&&Xn(n.children,r)||Array.isArray(n)&&Xn(n,r))||""}function Xn(n,r){for(var e=[],t=-1;++t<n.length;)e[t]=Kn(n[t],r);return e.join("")}const Oe={tokenize:Ae};function Ae(n){const r=n.attempt(this.parser.constructs.contentInitial,t,u);let e;return r;function t(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),L(n,r,"linePrefix")}function u(o){return n.enter("paragraph"),a(o)}function a(o){const c=n.enter("chunkText",{contentType:"text",previous:e});return e&&(e.next=c),e=c,i(o)}function i(o){if(o===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(o);return}return I(o)?(n.consume(o),n.exit("chunkText"),a):(n.consume(o),i)}}const Be={tokenize:Pe},Zn={tokenize:_e};function Pe(n){const r=this,e=[];let t=0,u,a,i;return o;function o(w){if(t<e.length){const O=e[t];return r.containerState=O[1],n.attempt(O[0].continuation,c,h)(w)}return h(w)}function c(w){if(t++,r.containerState._closeFlow){r.containerState._closeFlow=void 0,u&&M();const O=r.events.length;let A=O,d;for(;A--;)if(r.events[A][0]==="exit"&&r.events[A][1].type==="chunkFlow"){d=r.events[A][1].end;break}S(t);let _=O;for(;_<r.events.length;)r.events[_][1].end=Object.assign({},d),_++;return an(r.events,A+1,0,r.events.slice(O)),r.events.length=_,h(w)}return o(w)}function h(w){if(t===e.length){if(!u)return f(w);if(u.currentConstruct&&u.currentConstruct.concrete)return k(w);r.interrupt=Boolean(u.currentConstruct&&!u._gfmTableDynamicInterruptHack)}return r.containerState={},n.check(Zn,p,x)(w)}function p(w){return u&&M(),S(t),f(w)}function x(w){return r.parser.lazy[r.now().line]=t!==e.length,i=r.now().offset,k(w)}function f(w){return r.containerState={},n.attempt(Zn,g,k)(w)}function g(w){return t++,e.push([r.currentConstruct,r.containerState]),f(w)}function k(w){if(w===null){u&&M(),S(0),n.consume(w);return}return u=u||r.parser.flow(r.now()),n.enter("chunkFlow",{contentType:"flow",previous:a,_tokenizer:u}),T(w)}function T(w){if(w===null){P(n.exit("chunkFlow"),!0),S(0),n.consume(w);return}return I(w)?(n.consume(w),P(n.exit("chunkFlow")),t=0,r.interrupt=void 0,o):(n.consume(w),T)}function P(w,O){const A=r.sliceStream(w);if(O&&A.push(null),w.previous=a,a&&(a.next=w),a=w,u.defineSkip(w.start),u.write(A),r.parser.lazy[w.start.line]){let d=u.events.length;for(;d--;)if(u.events[d][1].start.offset<i&&(!u.events[d][1].end||u.events[d][1].end.offset>i))return;const _=r.events.length;let D=_,j,V;for(;D--;)if(r.events[D][0]==="exit"&&r.events[D][1].type==="chunkFlow"){if(j){V=r.events[D][1].end;break}j=!0}for(S(t),d=_;d<r.events.length;)r.events[d][1].end=Object.assign({},V),d++;an(r.events,D+1,0,r.events.slice(_)),r.events.length=d}}function S(w){let O=e.length;for(;O-- >w;){const A=e[O];r.containerState=A[1],A[0].exit.call(r,n)}e.length=w}function M(){u.write([null]),a=void 0,u=void 0,r.containerState._closeFlow=void 0}}function _e(n,r,e){return L(n,n.attempt(this.parser.constructs.document,r,e),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const Me={tokenize:qe};function qe(n){const r=this,e=n.attempt(kn,t,n.attempt(this.parser.constructs.flowInitial,u,L(n,n.attempt(this.parser.constructs.flow,u,n.attempt(Dt,u)),"linePrefix")));return e;function t(a){if(a===null){n.consume(a);return}return n.enter("lineEndingBlank"),n.consume(a),n.exit("lineEndingBlank"),r.currentConstruct=void 0,e}function u(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),r.currentConstruct=void 0,e}}const De={resolveAll:nt()},je=vn("string"),Re=vn("text");function vn(n){return{tokenize:r,resolveAll:nt(n==="text"?He:void 0)};function r(e){const t=this,u=this.parser.constructs[n],a=e.attempt(u,i,o);return i;function i(p){return h(p)?a(p):o(p)}function o(p){if(p===null){e.consume(p);return}return e.enter("data"),e.consume(p),c}function c(p){return h(p)?(e.exit("data"),a(p)):(e.consume(p),c)}function h(p){if(p===null)return!0;const x=u[p];let f=-1;if(x)for(;++f<x.length;){const g=x[f];if(!g.previous||g.previous.call(t,t.previous))return!0}return!1}}}function nt(n){return r;function r(e,t){let u=-1,a;for(;++u<=e.length;)a===void 0?e[u]&&e[u][1].type==="data"&&(a=u,u++):(!e[u]||e[u][1].type!=="data")&&(u!==a+2&&(e[a][1].end=e[u-1][1].end,e.splice(a+2,u-a-2),u=a+2),a=void 0);return n?n(e,t):e}}function He(n,r){let e=0;for(;++e<=n.length;)if((e===n.length||n[e][1].type==="lineEnding")&&n[e-1][1].type==="data"){const t=n[e-1][1],u=r.sliceStream(t);let a=u.length,i=-1,o=0,c;for(;a--;){const h=u[a];if(typeof h=="string"){for(i=h.length;h.charCodeAt(i-1)===32;)o++,i--;if(i)break;i=-1}else if(h===-2)c=!0,o++;else if(h!==-1){a++;break}}if(o){const h={type:e===n.length||c||o<2?"lineSuffix":"hardBreakTrailing",start:{line:t.end.line,column:t.end.column-o,offset:t.end.offset-o,_index:t.start._index+a,_bufferIndex:a?i:t.start._bufferIndex+i},end:Object.assign({},t.end)};t.end=Object.assign({},h.start),t.start.offset===t.end.offset?Object.assign(t,h):(n.splice(e,0,["enter",h,r],["exit",h,r]),e+=2)}e++}return n}function Ve(n,r,e){let t=Object.assign(e?Object.assign({},e):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const u={},a=[];let i=[],o=[];const c={consume:M,enter:w,exit:O,attempt:_(A),check:_(d),interrupt:_(d,{interrupt:!0})},h={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:g,sliceSerialize:f,now:k,defineSkip:T,write:x};let p=r.tokenize.call(h,c);return r.resolveAll&&a.push(r),h;function x(y){return i=K(i,y),P(),i[i.length-1]!==null?[]:(D(r,0),h.events=wn(a,h.events,h),h.events)}function f(y,z){return Qe(g(y),z)}function g(y){return Ne(i,y)}function k(){return Object.assign({},t)}function T(y){u[y.line]=y.column,V()}function P(){let y;for(;t._index<i.length;){const z=i[t._index];if(typeof z=="string")for(y=t._index,t._bufferIndex<0&&(t._bufferIndex=0);t._index===y&&t._bufferIndex<z.length;)S(z.charCodeAt(t._bufferIndex));else S(z)}}function S(y){p=p(y)}function M(y){I(y)?(t.line++,t.column=1,t.offset+=y===-3?2:1,V()):y!==-1&&(t.column++,t.offset++),t._bufferIndex<0?t._index++:(t._bufferIndex++,t._bufferIndex===i[t._index].length&&(t._bufferIndex=-1,t._index++)),h.previous=y}function w(y,z){const E=z||{};return E.type=y,E.start=k(),h.events.push(["enter",E,h]),o.push(E),E}function O(y){const z=o.pop();return z.end=k(),h.events.push(["exit",z,h]),z}function A(y,z){D(y,z.from)}function d(y,z){z.restore()}function _(y,z){return E;function E(W,G,nn){let X,N,$,R;return Array.isArray(W)?l(W):"tokenize"in W?l([W]):s(W);function s(H){return tn;function tn(rn){const on=rn!==null&&H[rn],cn=rn!==null&&H.null,Sn=[...Array.isArray(on)?on:on?[on]:[],...Array.isArray(cn)?cn:cn?[cn]:[]];return l(Sn)(rn)}}function l(H){return X=H,N=0,H.length===0?nn:ln(H[N])}function ln(H){return tn;function tn(rn){return R=j(),$=H,H.partial||(h.currentConstruct=H),H.name&&h.parser.constructs.disable.null.includes(H.name)?sn():H.tokenize.call(z?Object.assign(Object.create(h),z):h,c,mn,sn)(rn)}}function mn(H){return y($,R),G}function sn(H){return R.restore(),++N<X.length?ln(X[N]):nn}}}function D(y,z){y.resolveAll&&!a.includes(y)&&a.push(y),y.resolve&&an(h.events,z,h.events.length-z,y.resolve(h.events.slice(z),h)),y.resolveTo&&(h.events=y.resolveTo(h.events,h))}function j(){const y=k(),z=h.previous,E=h.currentConstruct,W=h.events.length,G=Array.from(o);return{restore:nn,from:W};function nn(){t=y,h.previous=z,h.currentConstruct=E,h.events.length=W,o=G,V()}}function V(){t.line in u&&t.column<2&&(t.column=u[t.line],t.offset+=u[t.line]-1)}}function Ne(n,r){const e=r.start._index,t=r.start._bufferIndex,u=r.end._index,a=r.end._bufferIndex;let i;return e===u?i=[n[e].slice(t,a)]:(i=n.slice(e,u),t>-1&&(i[0]=i[0].slice(t)),a>0&&i.push(n[u].slice(0,a))),i}function Qe(n,r){let e=-1;const t=[];let u;for(;++e<n.length;){const a=n[e];let i;if(typeof a=="string")i=a;else switch(a){case-5:{i="\r";break}case-4:{i=`
`;break}case-3:{i=`\r
`;break}case-2:{i=r?" ":"	";break}case-1:{if(!r&&u)continue;i=" ";break}default:i=String.fromCharCode(a)}u=a===-2,t.push(i)}return t.join("")}const Ue={[42]:Y,[43]:Y,[45]:Y,[48]:Y,[49]:Y,[50]:Y,[51]:Y,[52]:Y,[53]:Y,[54]:Y,[55]:Y,[56]:Y,[57]:Y,[62]:Hn},We={[91]:Nt},$e={[-2]:En,[-1]:En,[32]:En},Ye={[35]:Gt,[42]:bn,[45]:[Jn,bn],[60]:Zt,[61]:Jn,[95]:bn,[96]:Qn,[126]:Qn},Ge={[38]:Nn,[92]:Vn},Je={[-5]:Tn,[-4]:Tn,[-3]:Tn,[33]:xe,[38]:Nn,[42]:Cn,[60]:[yt,re],[91]:fe,[92]:[$t,Vn],[93]:Fn,[95]:Cn,[96]:Bt},Ke={null:[Cn,De]},Xe={null:[42,95]},Ze={null:[]};var ve=Object.freeze({__proto__:null,document:Ue,contentInitial:We,flowInitial:$e,flow:Ye,string:Ge,text:Je,insideSpan:Ke,attentionMarkers:Xe,disable:Ze});function nr(n={}){const r=ft([ve].concat(n.extensions||[])),e={defined:[],lazy:{},constructs:r,content:t(Oe),document:t(Be),flow:t(Me),string:t(je),text:t(Re)};return e;function t(u){return a;function a(i){return Ve(e,u,i)}}}const tt=/[\0\t\n\r]/g;function tr(){let n=1,r="",e=!0,t;return u;function u(a,i,o){const c=[];let h,p,x,f,g;for(a=r+a.toString(i),x=0,r="",e&&(a.charCodeAt(0)===65279&&x++,e=void 0);x<a.length;){if(tt.lastIndex=x,h=tt.exec(a),f=h&&h.index!==void 0?h.index:a.length,g=a.charCodeAt(f),!h){r=a.slice(x);break}if(g===10&&x===f&&t)c.push(-3),t=void 0;else switch(t&&(c.push(-5),t=void 0),x<f&&(c.push(a.slice(x,f)),n+=f-x),g){case 0:{c.push(65533),n++;break}case 9:{for(p=Math.ceil(n/4)*4,c.push(-2);n++<p;)c.push(-1);break}case 10:{c.push(-4),n=1;break}default:t=!0,n=1}x=f+1}return o&&(t&&c.push(-5),r&&c.push(r),c.push(null)),c}}function er(n){for(;!Un(n););return n}const Ln={}.hasOwnProperty,rr=function(n,r,e){return typeof r!="string"&&(e=r,r=void 0),ir(e)(er(nr(e).document().write(tr()(n,r,!0))))};function ir(n={}){const r=et({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:c(_n),autolinkProtocol:z,autolinkEmail:z,atxHeading:c(An),blockQuote:c(it),characterEscape:z,characterReference:z,codeFenced:c(On),codeFencedFenceInfo:h,codeFencedFenceMeta:h,codeIndented:c(On,h),codeText:c(ut,h),codeTextData:z,data:z,codeFlowValue:z,definition:c(at),definitionDestinationString:h,definitionLabelString:h,definitionTitleString:h,emphasis:c(lt),hardBreakEscape:c(Bn),hardBreakTrailing:c(Bn),htmlFlow:c(Pn,h),htmlFlowData:z,htmlText:c(Pn,h),htmlTextData:z,image:c(st),label:h,link:c(_n),listItem:c(ot),listItemValue:T,listOrdered:c(Mn,k),listUnordered:c(Mn),paragraph:c(ct),reference:H,referenceString:h,resourceDestinationString:h,resourceTitleString:h,setextHeading:c(An),strong:c(ht),thematicBreak:c(mt)},exit:{atxHeading:x(),atxHeadingSequence:D,autolink:x(),autolinkEmail:Sn,autolinkProtocol:cn,blockQuote:x(),characterEscapeValue:E,characterReferenceMarkerHexadecimal:rn,characterReferenceMarkerNumeric:rn,characterReferenceValue:on,codeFenced:x(w),codeFencedFence:M,codeFencedFenceInfo:P,codeFencedFenceMeta:S,codeFlowValue:E,codeIndented:x(O),codeText:x(N),codeTextData:E,data:E,definition:x(),definitionDestinationString:_,definitionLabelString:A,definitionTitleString:d,emphasis:x(),hardBreakEscape:x(G),hardBreakTrailing:x(G),htmlFlow:x(nn),htmlFlowData:E,htmlText:x(X),htmlTextData:E,image:x(R),label:l,labelText:s,lineEnding:W,link:x($),listItem:x(),listOrdered:x(),listUnordered:x(),paragraph:x(),referenceString:tn,resourceDestinationString:ln,resourceTitleString:mn,resource:sn,setextHeading:x(y),setextHeadingLineSequence:V,setextHeadingText:j,strong:x(),thematicBreak:x()}},n.mdastExtensions||[]),e={};return t;function t(m){let b={type:"root",children:[]};const C=[b],F=[],J=[],xn={stack:C,tokenStack:F,config:r,enter:p,exit:f,buffer:h,resume:g,setData:a,getData:i};let B=-1;for(;++B<m.length;)if(m[B][1].type==="listOrdered"||m[B][1].type==="listUnordered")if(m[B][0]==="enter")J.push(B);else{const U=J.pop();B=u(m,U,B)}for(B=-1;++B<m.length;){const U=r[m[B][0]];Ln.call(U,m[B][1].type)&&U[m[B][1].type].call(Object.assign({sliceSerialize:m[B][2].sliceSerialize},xn),m[B][1])}if(F.length>0){const U=F[F.length-1];(U[1]||rt).call(xn,void 0,U[0])}for(b.position={start:o(m.length>0?m[0][1].start:{line:1,column:1,offset:0}),end:o(m.length>0?m[m.length-2][1].end:{line:1,column:1,offset:0})},B=-1;++B<r.transforms.length;)b=r.transforms[B](b)||b;return b}function u(m,b,C){let F=b-1,J=-1,xn=!1,B,U,hn,gn;for(;++F<=C;){const q=m[F];if(q[1].type==="listUnordered"||q[1].type==="listOrdered"||q[1].type==="blockQuote"?(q[0]==="enter"?J++:J--,gn=void 0):q[1].type==="lineEndingBlank"?q[0]==="enter"&&(B&&!gn&&!J&&!hn&&(hn=F),gn=void 0):q[1].type==="linePrefix"||q[1].type==="listItemValue"||q[1].type==="listItemMarker"||q[1].type==="listItemPrefix"||q[1].type==="listItemPrefixWhitespace"||(gn=void 0),!J&&q[0]==="enter"&&q[1].type==="listItemPrefix"||J===-1&&q[0]==="exit"&&(q[1].type==="listUnordered"||q[1].type==="listOrdered")){if(B){let yn=F;for(U=void 0;yn--;){const un=m[yn];if(un[1].type==="lineEnding"||un[1].type==="lineEndingBlank"){if(un[0]==="exit")continue;U&&(m[U][1].type="lineEndingBlank",xn=!0),un[1].type="lineEnding",U=yn}else if(!(un[1].type==="linePrefix"||un[1].type==="blockQuotePrefix"||un[1].type==="blockQuotePrefixWhitespace"||un[1].type==="blockQuoteMarker"||un[1].type==="listItemIndent"))break}hn&&(!U||hn<U)&&(B._spread=!0),B.end=Object.assign({},U?m[U][1].start:q[1].end),m.splice(U||F,0,["exit",B,q[2]]),F++,C++}q[1].type==="listItemPrefix"&&(B={type:"listItem",_spread:!1,start:Object.assign({},q[1].start)},m.splice(F,0,["enter",B,q[2]]),F++,C++,hn=void 0,gn=!0)}}return m[b][1]._spread=xn,C}function a(m,b){e[m]=b}function i(m){return e[m]}function o(m){return{line:m.line,column:m.column,offset:m.offset}}function c(m,b){return C;function C(F){p.call(this,m(F),F),b&&b.call(this,F)}}function h(){this.stack.push({type:"fragment",children:[]})}function p(m,b,C){return this.stack[this.stack.length-1].children.push(m),this.stack.push(m),this.tokenStack.push([b,C]),m.position={start:o(b.start)},m}function x(m){return b;function b(C){m&&m.call(this,C),f.call(this,C)}}function f(m,b){const C=this.stack.pop(),F=this.tokenStack.pop();if(F)F[0].type!==m.type&&(b?b.call(this,m,F[0]):(F[1]||rt).call(this,m,F[0]));else throw new Error("Cannot close `"+m.type+"` ("+dn({start:m.start,end:m.end})+"): it’s not open");return C.position.end=o(m.end),C}function g(){return Le(this.stack.pop())}function k(){a("expectingFirstListItemValue",!0)}function T(m){if(i("expectingFirstListItemValue")){const b=this.stack[this.stack.length-2];b.start=Number.parseInt(this.sliceSerialize(m),10),a("expectingFirstListItemValue")}}function P(){const m=this.resume(),b=this.stack[this.stack.length-1];b.lang=m}function S(){const m=this.resume(),b=this.stack[this.stack.length-1];b.meta=m}function M(){i("flowCodeInside")||(this.buffer(),a("flowCodeInside",!0))}function w(){const m=this.resume(),b=this.stack[this.stack.length-1];b.value=m.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),a("flowCodeInside")}function O(){const m=this.resume(),b=this.stack[this.stack.length-1];b.value=m.replace(/(\r?\n|\r)$/g,"")}function A(m){const b=this.resume(),C=this.stack[this.stack.length-1];C.label=b,C.identifier=pn(this.sliceSerialize(m)).toLowerCase()}function d(){const m=this.resume(),b=this.stack[this.stack.length-1];b.title=m}function _(){const m=this.resume(),b=this.stack[this.stack.length-1];b.url=m}function D(m){const b=this.stack[this.stack.length-1];if(!b.depth){const C=this.sliceSerialize(m).length;b.depth=C}}function j(){a("setextHeadingSlurpLineEnding",!0)}function V(m){const b=this.stack[this.stack.length-1];b.depth=this.sliceSerialize(m).charCodeAt(0)===61?1:2}function y(){a("setextHeadingSlurpLineEnding")}function z(m){const b=this.stack[this.stack.length-1];let C=b.children[b.children.length-1];(!C||C.type!=="text")&&(C=pt(),C.position={start:o(m.start)},b.children.push(C)),this.stack.push(C)}function E(m){const b=this.stack.pop();b.value+=this.sliceSerialize(m),b.position.end=o(m.end)}function W(m){const b=this.stack[this.stack.length-1];if(i("atHardBreak")){const C=b.children[b.children.length-1];C.position.end=o(m.end),a("atHardBreak");return}!i("setextHeadingSlurpLineEnding")&&r.canContainEols.includes(b.type)&&(z.call(this,m),E.call(this,m))}function G(){a("atHardBreak",!0)}function nn(){const m=this.resume(),b=this.stack[this.stack.length-1];b.value=m}function X(){const m=this.resume(),b=this.stack[this.stack.length-1];b.value=m}function N(){const m=this.resume(),b=this.stack[this.stack.length-1];b.value=m}function $(){const m=this.stack[this.stack.length-1];i("inReference")?(m.type+="Reference",m.referenceType=i("referenceType")||"shortcut",delete m.url,delete m.title):(delete m.identifier,delete m.label),a("referenceType")}function R(){const m=this.stack[this.stack.length-1];i("inReference")?(m.type+="Reference",m.referenceType=i("referenceType")||"shortcut",delete m.url,delete m.title):(delete m.identifier,delete m.label),a("referenceType")}function s(m){const b=this.stack[this.stack.length-2],C=this.sliceSerialize(m);b.label=kt(C),b.identifier=pn(C).toLowerCase()}function l(){const m=this.stack[this.stack.length-1],b=this.resume(),C=this.stack[this.stack.length-1];a("inReference",!0),C.type==="link"?C.children=m.children:C.alt=b}function ln(){const m=this.resume(),b=this.stack[this.stack.length-1];b.url=m}function mn(){const m=this.resume(),b=this.stack[this.stack.length-1];b.title=m}function sn(){a("inReference")}function H(){a("referenceType","collapsed")}function tn(m){const b=this.resume(),C=this.stack[this.stack.length-1];C.label=b,C.identifier=pn(this.sliceSerialize(m)).toLowerCase(),a("referenceType","full")}function rn(m){a("characterReferenceType",m.type)}function on(m){const b=this.sliceSerialize(m),C=i("characterReferenceType");let F;C?(F=dt(b,C==="characterReferenceMarkerNumeric"?10:16),a("characterReferenceType")):F=jn(b);const J=this.stack.pop();J.value+=F,J.position.end=o(m.end)}function cn(m){E.call(this,m);const b=this.stack[this.stack.length-1];b.url=this.sliceSerialize(m)}function Sn(m){E.call(this,m);const b=this.stack[this.stack.length-1];b.url="mailto:"+this.sliceSerialize(m)}function it(){return{type:"blockquote",children:[]}}function On(){return{type:"code",lang:null,meta:null,value:""}}function ut(){return{type:"inlineCode",value:""}}function at(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function lt(){return{type:"emphasis",children:[]}}function An(){return{type:"heading",depth:void 0,children:[]}}function Bn(){return{type:"break"}}function Pn(){return{type:"html",value:""}}function st(){return{type:"image",title:null,url:"",alt:null}}function _n(){return{type:"link",title:null,url:"",children:[]}}function Mn(m){return{type:"list",ordered:m.type==="listOrdered",start:null,spread:m._spread,children:[]}}function ot(m){return{type:"listItem",spread:m._spread,checked:null,children:[]}}function ct(){return{type:"paragraph",children:[]}}function ht(){return{type:"strong",children:[]}}function pt(){return{type:"text",value:""}}function mt(){return{type:"thematicBreak"}}}function et(n,r){let e=-1;for(;++e<r.length;){const t=r[e];Array.isArray(t)?et(n,t):ur(n,t)}return n}function ur(n,r){let e;for(e in r)if(Ln.call(r,e)){const t=e==="canContainEols"||e==="transforms",a=(Ln.call(n,e)?n[e]:void 0)||(n[e]=t?[]:{}),i=r[e];i&&(t?n[e]=[...a,...i]:Object.assign(a,i))}}function rt(n,r){throw n?new Error("Cannot close `"+n.type+"` ("+dn({start:n.start,end:n.end})+"): a different token (`"+r.type+"`, "+dn({start:r.start,end:r.end})+") is open"):new Error("Cannot close document, a token (`"+r.type+"`, "+dn({start:r.start,end:r.end})+") is still open")}function ar(n){Object.assign(this,{Parser:e=>{const t=this.data("settings");return rr(e,Object.assign({},t,n,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}export default ar;
